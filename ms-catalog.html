<html>
	<head>
		<title>Computus.lat Catalogue 2.0</title>
		<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.css" />
		<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
		<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.js"></script>
		<style>
			body {
				font-family: Calibri, Verdana;
			}
			
			h1 {
				color: #009688;
				font-size: 1.6rem;
			}
			
			input[placeholder=MSID], input[placeholder=IIIF] {
				width: 40px;
			}
			
			
			input[placeholder=Digitizations] {
				width: 80px;
			}
			
			input[placeholder=Shelfmark] {
				width: 500px;
			}
			
			td {
				vertical-align: top;
			}
			
			a:link, a:visited, a:hover, a:active  {
				color: #009688;
			}
			
		</style>
	</head>
	<body>
		<h1>Computus.lat Catalogue 2.0</h1>
		<a href="https://thomsnijders.nl/computus-lat/" target="_blank">More information about Computus.lat</a><br>
	
		<table id="msCatalog" class="cell-border compact stripe">
			<thead>
				<tr>
					<th>MSID</th>
					<th>Shelfmark</th>
					<th>Digitizations</th>
					<th>IIIF</th>
					<th>Schriften</th>
					<th>Reichskalender</th>
				</tr>
			</thead>
			<tbody>
			</tbody>
		</table>
			
		<script type="text/javascript">
			// Retrieve the contents of ms-catalog.json, which should be present in the json directory
			$.getJSON("json/ms-catalog.json", function( data ) {
				// Add a row for each entry
				$.each(data, function(index, row) {
					// Prepare Digitalizations
					
					let tdDigitalizations = $("<td>");
					if(row.Digitalizations !== null) {
						let aDigitalizations = row.Digitalizations.split(', ');
						$.each(aDigitalizations, function(index, url) {
						
							if(url !== "") {							
								tdDigitalizations.append("<a href=\"" + url + "\" target=\"_blank\">Digitalization</a>");
								if (index != aDigitalizations.length -1) {
									tdDigitalizations.append("<br>");
								}
							}
						});
						
					}
										
					let tdIIIF = $("<td>");
					if(row.IIIF !== null) {
						let aIIIF = row.IIIF.split(', ');
						$.each(aIIIF, function(index, url) {
							if(url !== "") {
								tdIIIF.append("<a href=\"" + url + "\" target=\"_blank\">IIIF</a>");
								if (index != aIIIF.length -1) {
									tdIIIF.append("<br>");
								}
							}
						});
						
					}
					
					let tdSchriften = $("<td>");
					if(row.Schriften !== null) {
						let jsonSchriften = [
							{
								"Title": "Prol. Aquit.",
								"Pages": "pp. 329-347",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/prol-aquit/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,1_S._329"
							},
							{
								"Title": "Dial. Burg.",
								"Pages": "pp. 348-374",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/de-racione-conpoti-dial-burg/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,1_S._348"
							},
							{
								"Title": "Dial. Neustr.",
								"Pages": "pp. 375-423",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/dial-neustr/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,1_S._375"
							},
							{
								"Title": "Dial. Longob.",
								"Pages": "pp. 424-461",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/dial-longob/",
								"URL_Schriften": "hhttp://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,1_S._424"
							},
							{
								"Title": "Quaest. Austr.",
								"Pages": "pp. 462-508",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/quaest-austr/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,1_S._462"
							},
							{
								"Title": "Quaest. Longob.",
								"Pages": "pp. 509-526",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/quaest-longob/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,1_S._509"
							},
							{
								"Title": "Lect. comp.",
								"Pages": "pp. 527-659",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/lect-comp/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._527"
							},
							{
								"Title": "Lib. ann.",
								"Pages": "pp. 660-772",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/lib-ann/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._660"
							},
							{
								"Title": "Add. Col.",
								"Pages": "pp. 773-794",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/add-col/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._660"
							},
							{
								"Title": "Vers. Tur.",
								"Pages": "pp. 795-819",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/vers-tur/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._795"
							},
							{
								"Title": "Arn. Serm.",
								"Pages": "pp. 820-884",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/arn-serm/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._820"
							},
							{
								"Title": "Comp. Col.",
								"Pages": "pp. 885-950",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/comp-col/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._885"
							},
							{
								"Title": "Ser. nov.",
								"Pages": "pp. 951-1008",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/ser-nov/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._951"
							},
							{
								"Title": "Ser. ant.",
								"Pages": "pp. 1009-1020",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/ser-ant/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,2_S._1009"
							},
							{
								"Title": "Epist. Rat.",
								"Pages": "pp. 1021-1033",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/ser-ant/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,3_S._1021"
							},
							{
								"Title": "Cap. comp.",
								"Pages": "pp. 1034-1053",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/cap-comp/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,3_S._1034"
							},
							{
								"Title": "Lib. comp.",
								"Pages": "pp. 1054-1334",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/lib-comp/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,3_S._1054"
							},
							{
								"Title": "Claudius Ser.",
								"Pages": "pp. 1335-1349",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/claudius-ser/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,3_S._1335"
							},
							{
								"Title": "Arg. Aquens.",
								"Pages": "pp. 1350-1366",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/arg-aquens/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,3_S._1350"
							},
							{
								"Title": "Lib. calc.",
								"Pages": "pp. 1367-1454",
								"URL_TS": "https://thomsnijders.nl/computus-lat/schriften/lib-calc/",
								"URL_Schriften": "http://www.mgh.de/dmgh/resolving/MGH_QQ_zur_Geistesgesch._21,3_S._1367"
							}
						];
					
						$.each(jsonSchriften, function(index, entry) {
							row.Schriften = row.Schriften.replace(entry.Title, "<a href=\"" + entry.URL_TS + "\" target=\"_blank\">" + entry.Title + "</a>");
							row.Schriften = row.Schriften.replace(entry.Pages, "<a href=\"" + entry.URL_Schriften+ "\" target=\"_blank\">" + entry.Pages + "</a>");
						});
						
						let aSchriften = row.Schriften.split(', ');
						$.each(aSchriften, function(index, part) {
							if(part !== "") {		
								tdSchriften.append(part);
								if (index != aSchriften.length -1) {
									tdSchriften.append("<br>");
								}
							}
						});
					}
					
					let tdReichskalender = $("<td>");
					if(row.Reichskalender !== null) {
						let aReichskalender = row.Reichskalender.split(', ');
						$.each(aReichskalender, function(index, part) {
							if(part !== "") {
								tdReichskalender.append(part);
								if (index != aReichskalender.length -1) {
									tdReichskalender.append("<br>");
								}
							}
						});
					}
				
					// Prepare a new row
					let tr = $("<tr>");
					$($("<td>").text(row.MSID)).appendTo(tr);
					$($("<td>").text(row.Shelfmark)).appendTo(tr);
					tdDigitalizations.appendTo(tr);
					tdIIIF.appendTo(tr);
					tdSchriften.appendTo(tr);
					tdReichskalender.appendTo(tr);
					
					$("#msCatalog tbody").append(tr);
				});
				
				let table = new DataTable('#msCatalog', {
					// options
					paging: false,
					initComplete: function () {
					this.api()
						.columns()
						.every(function () {
							let column = this;
							let title = column.header().textContent;
			 
							// Create input element
							let input = document.createElement('input');
							input.placeholder = title;
							column.header().replaceChildren(input);
			 
							// Event listener for user input
							input.addEventListener('keyup', () => {
								if (column.search() !== this.value) {
									column.search(input.value).draw();
								}
							});
						});
					}
				});
			});
		
			
		</script>
					
	</body>
</html>
