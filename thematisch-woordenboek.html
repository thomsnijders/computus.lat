<html>
<head>
	<title>Thematisch woordenboek</title>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@100..900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
		
	<style>	
		body { 
			font-family: "Roboto", serif;
			padding: 30px;
			background-color: #EAEFF3;
		}
		
		h1 {
			font-family: "Roboto Slab", serif;	
		}
		
		h2 {
			font-family: "Roboto Slab", serif;
			margin-bottom: 0px;
		}
		
		p {
			display: block;
			padding: 10px 0;
		}
	
		input {
			border-radius: 10px;
			border: 1px solid black;
			padding: 10px;
			font-size: 15px;
			width: 100%;
			margin: 0 auto;
			background-color: ##F0F5F6;
		}
		
		select {
			border-radius: 10px;
			border: 1px solid black;
			padding: 10px;
			font-size: 15px;
			width: 100%;
			margin: 0 auto;
			background-color: #F0F5F6;
		}
		
		@media screen and (min-width: 1000px) {
			input {
				width: 65vw;
			}
			
			select {
				width: 27vw;
			}
		}
		
		table {
			padding: 10px;
		}
		
		li::marker {
			color: #50C878;
			font-weight: 600;
		}
		
	</style>
	
	<script>
	
	let woordsoorten = [
		{ abbreviation: "alle", full: "alle woordsoorten" },
		{ abbreviation: "znw", full: "zelfstandig naamwoord" },
		{ abbreviation: "ww", full: "werkwoord" },
		{ abbreviation: "bvnw", full: "bijvoeglijk naamwoord" },
	];
	
	function findWoordsoort(input, target){
		let found;
		
		$.each(input, function(key, value) {
			
			if(value.abbreviation == target) {
				found = value.full;
				return true;
			}
		});
		
		return found;
	};
	
	function contains(haystack, needle) {
		if(haystack.indexOf(needle) != -1){
			return true
		}else{
			return false;
		}
	}
	
	$(document).ready(function() {
		$.getJSON( "json/thematische-woordenlijst.json", function( dictionary ) {
			$.each(woordsoorten, function(key, value) {
				$("#woordsoort").append($("<option>")
									.attr("value", value.abbreviation)
									.text(value.full));
			});
			
			$("#word").on("input", function() {
				$("#result").empty();
				let searchterm = $(this).val();
				let woordsoort = $("#woordsoort").val();
				if(searchterm.length >= 3) {
					$.each(dictionary, function(key, value) {
						if(value.woord.replace('de ', '').replace('het ', '').replace('een ', '').includes(searchterm) && (woordsoort == "alle" || value.woordsoort == woordsoort)) {
							let $tr = $("<tr>");
							let $td = $("<td>").append("<h2>" + value.woord + "</h2")
											   .append("<span> </span>")
											   .append("<em>" + findWoordsoort(woordsoorten, value.woordsoort) + "</em>");
											   
							let $ol = $("<ol>");
								$.each(value.betekenis.split(", "), function(key, value) {
									$ol.append("<li>" + value + "</li>");
								});
											   
							$td.append((value.betekenis !== "" ? $ol : "<p>Betekenis niet opgegeven.</p>"));
							$td.append("<em>" + value.thema + "</em>");
							$tr.append($td);
							$("#result").append($tr);
						}
					});
				}
			});
			
			$("#woordsoort").on("change", function() {
				$("#word").trigger("input");
			});
		});
	});

	</script>
</head>
<body>
	<h1>Thematisch woordenboek</h1>
	<input id='word' name='word' placeholder='Van welk woord zoek je de betekenis?'>
	<select id='woordsoort' name='woordsoort'></select>
	<table id='result'></table>
</body>
</html>